<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Canvas tests</title>
	<style type="text/css">
		body{
			margin: 40px auto;
			max-width: 650px;
			line-height: 1.2;
			font-size: 18px;
			color: #444;
			padding: 0 10px;
		}

		h1, h2, h3{
			line-height: 1.2;
		}

		canvas{
			background: #444;
		}
	</style>
</head>
<body>
<h1>A canvas test with the Syracuse sequence</h1>
<canvas id="myCanvas" height="300" width="300">No Canvas JS</canvas>
<p><input type="number" value="16" min="1" id="seqStart"/></p>

<script>
canvas = document.getElementById('myCanvas')
ctx = canvas.getContext('2d');
ctx.translate(0, canvas.height);
ctx.scale(1, -1);

function seqGen(n) {
	return function () {
		n = n%2 ? n*3+1 : n/2;
		return n;
	};
}

function draw(seqStart) {
	ctx.clearRect(0, 0, canvas.width, canvas.height);

	ctx.fillStyle = '#088';
	let gen = seqGen(seqStart);
	let x = [];
	let y = [];
	let seqLen = 0;
	let seqMax = 0;
	while (y[y.length-1] !== 1) {
		x.push(seqLen++);
		y.push(gen());
		if (seqMax < y[seqLen-1]) {
			seqMax = y[seqLen-1];
		}
	}

	ctx.beginPath();
	ctx.moveTo(0, 0);
	for (let i = 0; i < seqLen-1; i++) {
		ctx.lineTo(canvas.height/seqLen*x[i+1], canvas.height/seqMax*y[i+1]);
		console.log((canvas.width/seqLen)*x[i+1]);
		console.log((canvas.height/seqMax)*y[i+1]);
	}
	ctx.lineTo(0, 0);
	ctx.fill();
}

let input = document.getElementById('seqStart');
input.onchange = function () {
	draw(this.value);
};

draw(input.value);
</script>

</body>
</html>

